@startuml

rectangle "APIServer" as api

rectangle "informer 生产者" as producer{
    rectangle "Reflector" as reflector
    rectangle "Delta FIFO" as delta
    rectangle "Controller" as c
    rectangle "Indexer cache" as cache
}

rectangle "Worker Queue" as queue

rectangle "Worker" as worker

api -left-> reflector: list 获取全量资源 / watch 持续监听资源变化事件
reflector -down-> delta: 缓存变更事件
c -down-> cache: 维护本地缓存
delta -down-> c: 取出需要处理的事件
c -right-> queue: 暂存需要处理的资源 key
queue -down-> worker: 从队列中获取需要处理的 key
worker -up-> api: 将状态写入集群
cache -right-> worker: 读取需要操作的对象的最新状态

@enduml